{# templates/academics/perfil_materia.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}{{ materia.nombre }} ({{ anio }}){% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'people/css/perfilprofesor.css' %}">
<style>
  /* Reuso tal cual; sólo aseguro que los comentarios y estrellas no sean interactivos */
  .pp-stars, .pp-stars-pill, .pp-stars-badge { pointer-events: none; }
  .pp-comment a { pointer-events: none; }
  .pp-comment { cursor: default; }
</style>
{% endblock %}

{% block content %}
<div class="pp-container">
  <section class="pp-header">
    <div class="pp-avatar">
      {# si tenés imagen por materia, cambiala acá #}
      <img src="{% static 'people/inge.jpg' %}" alt="{{ materia.nombre }}">
    </div>

    <div class="pp-headinfo">
      <h1 class="pp-name">{{ materia.nombre }}</h1>
    </div>

    <div class="pp-meta">
      <div class="pp-line">
        <span class="pp-field">Profesores:</span>
        <span class="pp-list">
          {% if profes %}
            {% for p in profes %}
              <a class="pp-link" href="{% url 'people:perfil_profesor' p.username %}">
                {{ p.get_full_name|default:p.username }}
              </a>{% if not forloop.last %} - {% endif %}
            {% endfor %}
          {% else %}
            <span class="pp-empty">Sin asignar</span>
          {% endif %}
        </span>
      </div>

      <div class="pp-line">
        <span class="pp-field">Comisiones:</span>
        <span class="pp-list">
          {% for c in comisiones %}
            <a class="pp-link" href="{% url 'academics:perfil_comision' materia.id c.id c.anio %}">{{ c.nombre }}</a>{% if not forloop.last %}, {% endif %}
            {% empty %}
                <span class="pp-empty">—</span>
            {% endfor %}
        </span>
      </div>

      <div class="pp-rating-row">
        <span class="pp-score">{{ rating.score }}</span>
        <span class="pp-stars-pill">
          <span class="pp-stars" aria-label="rating">
            {% for i in "12345" %}
              {% if forloop.counter <= rating.full_stars %}
                <i>★</i>
              {% else %}
                <i class="off">★</i>
              {% endif %}
            {% endfor %}
          </span>
        </span>
        <span class="pp-opiniones">{{ rating.count_text }}</span>
      </div>
    </div>
  </section>

  <section class="pp-comments">
    <div class="pp-comments-head">
      <h2>Comentarios <span class="pp-count">{{ rating.count_text }}</span></h2>
      <button class="pp-filter">Filtrar <span class="caret">▾</span></button>
    </div>

    <div class="pp-comments-box">
      {% for c in comentarios %}
        <article class="pp-comment">
          <div class="pp-stars-badge">
            {% for _ in "12345" %}
              {% if forloop.counter <= c.estrellas %}<i>★</i>{% else %}<i class="off">★</i>{% endif %}
            {% endfor %}
          </div>
          <p class="pp-comment-text">{{ c.texto }}</p>
          <time class="pp-date">{{ c.fecha }}</time>
        </article>
      {% empty %}
        <div class="pp-no-comments">Todavía no hay comentarios.</div>
      {% endfor %}
    </div>
  </section>
</div>
{% endblock %}
