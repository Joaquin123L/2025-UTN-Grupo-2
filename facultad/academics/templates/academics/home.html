{% extends "base.html" %}
{% block title %}Departamentos - Pasa la Data{% endblock %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'academics/css/departamento.css' %}">
{% endblock %}


{% block content %}
<div class="aa-container">
  <div class="aa-toolbar">
    <div class="aa-titles">
  <h2 class="aa-h2">Departamentos:</h2>
</div>

    <div class="aa-search">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 0 0 1.57-4.23C15.99 6.01 13.48 3.5 10.5 3.5S5 6.01 5 9s2.51 5.5 5.5 5.5c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l4.25 4.25 1.27-1.27L15.5 14Zm-5 0C8.01 14 6 11.99 6 9.5S8.01 5 10.5 5 15 7.01 15 9.5 12.99 14 10.5 14Z" />
      </svg>
      <input id="search" type="text" placeholder="Buscar" autocomplete="off">
    </div>
  </div>

  <section id="grid" class="aa-grid">
    {% for d in departments %}
    {% url 'academics:subjects_by_dept' d.id as subj_url %}
    {% include "academics/Components/card.html" with title=d.nombre image_url=d.imagen icon=d.icono badge=d.badge rating=d.calificacion opiniones=d.opiniones href=subj_url new_tab=False %}
    {% empty %}
      <p>No hay departamentos disponibles.</p>
    {% endfor %}
  </section>
</div>

<script>
  const input = document.getElementById('search');
  const cards = Array.from(document.querySelectorAll('.aa-card'));
  input.addEventListener('input', (e) => {
    const q = e.target.value.trim().toLowerCase();
    cards.forEach(c => c.style.display = c.dataset.name.includes(q) ? '' : 'none');
  });
</script>
{% endblock %}